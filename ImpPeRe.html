<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>Imperial Penal References</title>
	<link rel="icon" type="image/x-icon" href="favicon.png">
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="locations.js"></script>
	<script src="regions.js"></script>
	<script src="events.js"></script>
	<script src="hyperspace.js"></script>
	<script src="missions.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.5/dist/js.cookie.min.js"></script>
	<script src="ImpPeRe.js"></script>
	<link rel="stylesheet" href="ImpPeRe.css">
</head>

<body id='body'>

	<span id="mainHeader" class="main-header align-left font-starwars">Imperial Penal References</span>
	<button onclick="switchFontBesh()" class="font-besh align-bottom align-right tooltip">
		Aurebesh
		<span class="tooltiptext">Switch to Aurebesh font.</span>
	</button>
	<button onclick="switchFontStarWars()" class="font-starwars align-bottom align-right tooltip">
		Galactic Basic
		<span class="tooltiptext">Switch to Star Wars font.</span>
	</button>
	<button onclick="switchFontNormal()" class="font-normal align-bottom align-right tooltip">
		En'glsh
		<span class="tooltiptext">Switch to normal font.</span>
	</button>

	<table border="2" width="100%">
		<tr style="display: table-cell;">
			<td class="margin-0">

				<div class="flex-container">
					<label for="locationDropdown" id="locationDropdownLabel" class="font-starwars">Location:
						<select id="locationDropdown">
							<option value="">-- Current Location --</option>
						</select>
					</label>
					<div style="font-size: larger; margin: 0px 0px 0px 10px;">
						<a id="currentURL" href="https://starwars.fandom.com/wiki/Planet/Legends" target="_blank">
							your location
						</a>
					</div>
				</div>
				<div class="flex-container secret-filters hidden manifest-menu-hidden"><!-- display if Pirate Holonet or similar is installed -->
					<em>Filters: </em>&nbsp;&nbsp;&nbsp;
					<label for="filterCurrBlackMarket">
						Black Market: <input type="checkbox" id="filterCurrBlackMarket" class="filter-input-hidden"></input>
					</label>&nbsp;&nbsp;
					<label for="filterCurrShadowport">
						Shadowport: <input type="checkbox" id="filterCurrShadowport" class="filter-input-hidden"></input>
					</label>&nbsp;&nbsp;
					<label for="filterCurrStarportGrade">
						Starport Grade: <input type="number" id="filterCurrStarportGrade" class="filter-input-hidden" min="0" max="5" defaultValue="0"></input>&nbsp;&nbsp;
					</label>&nbsp;&nbsp;
					<label for="filterDistance">
						Max Distance: <input type="number" id="filterDistance" class="filter-input-hidden" min="0" max="27" defaultValue="0"></input>&nbsp;&nbsp;
					</label>
				</div>
			</td>
		</tr>
		<tr>
			<td class="align-top margin-0 colspan-2">
				<div id="locationDetails" class="section tooltip width-half">
					<span class="tooltiptext">
					Known and reported details of your current location.
					</span>
					<div class="header3 align-left">BoSS Database</div>
					<div class="flex-container">
						<div class="box-around">
							<strong>Region:</strong> <a id="currentRegionURL"
								href="https://starwars.fandom.com/wiki/Unknown_Regions/Legends"
								target="_blank"><span id="currentRegion">unknown</span></a>
						</div>
						<div class="box-around">
							<strong>Sector:</strong> <span id="currentSector">unknown</span>
						</div>
						<div class="box-around">
							<strong>System:</strong> <span id="currentSystem">unknown</span>
						</div>
						<div class="box-around">
							<strong>Capital City:</strong> <span id="currentCapital">unknown</span>
						</div>
						<div class="box-around">
							<strong>Starport:</strong> <a id="currentStarportURL"
								href="https://starwars.fandom.com/wiki/Spaceport/Legends"
								target="_blank">unknown</a>
						</div>
						<div class="box-around">
							<strong>Map:</strong> <a href="https://www.starwars.com/star-wars-galaxy-map" target="_blank"><span id="currentMap">unknown</span></a>
						</div>
					</div>
					<p class="header3 align-left">Atmosphere & Terrain</p>
					<div class="flex-container">
						<div class="box-around">
							<strong>Atmosphere:</strong> <span id="currentAtmosphere">unknown</span>
						</div>
						<div class="box-around">
							<strong>Terrain:</strong> <span id="currentTerrain">unknown</span>
						</div>
						<div class="box-around">
							<strong>Climate:</strong> <span id="currentClimate">unknown</span>
						</div>
						<div class="box-around">
							<strong>Gravity:</strong> <span id="currentGravity">unknown</span>
						</div>
						<div class="box-around">
							<strong>Inhabitants:</strong> <span id="currentInhabitants">unknown</span>
						</div>
					</div>
					<br/>
					<div class="header3 align-left">Astrogation Computer</div>
					<div class="flex-container">
						<div class="box-around">
							<div class="box-around">
								<strong>Current Location Hyperlanes:</strong> <pre id="currentHyperlanes" class="hyperlanes">unknown</pre>
							</div>
						</div>
						<div class="box-around" style="width:40%">
							<div class="flex-container">
								<label for="destinationDropdown" id="destinationDropdownLabel" class="font-besh">Destination:
									<select id="destinationDropdown">
										<option value="">-- Select Destination --</option>
									</select>
								</label>
								<div style="font-size: larger; margin: 0px 0px 0px 10px;">
									<a id="destURL" href="https://starwars.fandom.com/wiki/Planet/Legends" target="_blank">
										your destination
									</a>
								</div>
							</div>
							<br/>
							<div id="estTravelTime" class="box-around hidden" style="text-align: center;display: contents;">
								<div style="align: center; width: 95%; text-align: center;">
									<strong style="font-size: larger">Estimated Travel Time: </strong>
									<span id="estHyperspaceTime" style="font-size: larger; color: greenyellow;">calculating...</span>
									<br/>
								</div>
								<div class="reference-note">
									<span style="font-size: smaller; float: center;">(<span id="baseHyperSpaceDistance"></span>factor <span id="hyperrouteFactor">1.0</span>, Class <span id="ettHyperdriveClass">?</span>)</span>
									<br/>
									[ reference: <span id="baseHyperspaceTime" style="color: green;">calculating...</span> (factor 1.0, Class 1) ]
								</div>
							</div>
							<hr style="width: 50%;"/>
							<div id="travelAdjustments" class="box-around" style="text-align: left; width: 97%" style="text-align: center;display: contents;">
								<div style="align: center; width: 95%; text-align: center;">
									<strong style="font-size: smaller">Potential Astrogation Adjustments</strong></span>
									<span id="hyperspaceDice" style="font-size: smaller">calculating...</span>
									<br/>
								</div>
							</div>
						</div>
						<div class="box-around">
							<div class="box-around">
								<strong>Destination Hyperlanes:</strong> <pre id="destHyperlanes" class="hyperlanes">unknown</pre>
							</div>
						</div>
					</div>
					<br/>
				</div>
			</td>
		</tr>
	</table>

	<!-- Ship Manifest -->
	<table border="2" width="100%">
		<tr style="display: table-cell;">
			<td>
				<p>
					<div class="tooltip">
						<span class="ship-manifest-header">
							Ship Manifest
						</span>
						<ul class="ship-manifest-menu">
							<li class="ship-manifest-item" style="padding: 2px 5px 0px 10px; text-align: right;">
								<label for="hullMax" style="padding: 0px 0px 3px 0px;">Hull Trauma max: <input type="number" id="hullMax" class="cargo-declared select-medium-number" min="0" defaultValue="0"></input></label>
								<label for="hullCurrent" style="padding: 0px 0px 3px 0px;">Hull Trauma current: <input type="number" id="hullCurrent" class="cargo-declared select-medium-number" min="0" defaultValue="0"></input></label>
							</li>
							<li class="ship-manifest-item" style="padding: 2px 5px 0px 10px; text-align: right;">
								<label for="strainMax" style="padding: 0px 0px 3px 0px;">System Strain max: <input type="number" id="strainMax" class="cargo-declared select-medium-number" min="0" defaultValue="0"></input></label>
								<label for="strainCurrent" style="padding: 0px 0px 3px 0px;">System Strain current: <input type="number" id="strainCurrent" class="cargo-declared select-medium-number" min="0" defaultValue="0"></input></label>
							</li>
						</ul>
						<ul class="ship-manifest-menu">
							<li class="ship-manifest-item">
								<label for="speedCurrent" style="padding: 0px 0px 3px 0px;">Current Speed: <input type="number" id="speedCurrent" class="cargo-declared select-medium-number" min="0" defaultValue="0"></input></label>
								<label for="shipSilhouette" id="silhLabel">Silhouette:&nbsp;
									<select id="shipSilhouette" class="select-short-number">
										<option value="0">0</option>
										<option value="1">1</option>
										<option value="2">2</option>
										<option value="3">3</option>
										<option value="4" selected="true">4</option>
										<option value="5">5</option>
										<option value="6">6</option>
										<option value="7">7</option>
										<option value="8">8</option>
										<option value="9">9</option>
										<option value="10">10</option>
									</select>
								</label>
								<span id="silh5plus" class="align-right"></span>
							</li>
							<li class="ship-manifest-item">
								<label for="hyperdriveClass">Hyperdrive: Class&nbsp;
									<select id="hyperdriveClass" class="select-short-number">
										<option value="0.5">0.5</option>
										<option value="1" selected="true">1</option>
										<option value="2">2</option>
										<option value="3">3</option>
										<option value="4">4</option>
										<option value="5">5</option>
										<option value="6">6</option>
										<option value="7">7</option>
										<option value="8">8</option>
										<option value="9">9</option>
										<option value="10">10</option>
										<option value="11">11</option>
										<option value="12">12</option>
										<option value="13">13</option>
										<option value="14">14</option>
										<option value="15">15</option>
									</select>
								</label>
							</li>
							<li class="ship-manifest-item" style="padding: 2px 5px 0px 10px;">
								<label for="cargoDeclared" style="padding: 0px 0px 3px 0px;">Cargo Declared: <input type="number" id="cargoDeclared" class="cargo-declared select-medium-number" min="0" defaultValue="0"></input>cr</label>
							</li>
							<li class="ship-manifest-item secret-manifest-item">
								<label for="pirateHolonet">Pirate HoloNet: <input type="checkbox" id="pirateHolonet"></input></label>
								<label for="cargoHidden" style="padding: 0px 0px 3px 0px;">Cargo Hidden: <input type="number" id="cargoHidden" class="cargo-declared select-medium-number" min="0" defaultValue="0"></input>cr</label>
							</li>
						</ul>
						<span class="tooltiptext">
						CAPTAIN, you must declare your ship's status, logs, and cargo in order to retrieve Hyperlane updates and BoSS certification.
						</span>
					</div>
				</p>
			</td>
		</tr>
	</table>

	<!-- Local Regulations -->
	<table border="2" width="100%">
		<tr style="display: table-cell;">
			<div class="local-customs-box tooltip">
				<span class="tooltiptext">
				Last reported starport fees for this location. Consult your Game Master.
				</span>
				<h3 class="local-customs-box-header">Starport</h3>
				<strong><center><span id="starportHeader"></span></center></strong>
				<strong>Landing Fee:</strong> <span id="textFeePortLanding"></span><br/>
				<strong>Berthing Fee (per day):</strong> <span id="textFeePortBerthing"></span><br/>
				<strong>Customs Fee:</strong> <span id="textFeeCustoms"></span><br/>
				<strong>Repairs (per HT/Component):</strong> <span id="textFeeRepairs"></span><br/>
				<strong>Visitation Fee:</strong> <span id="textFeeVisitation"></span><br/>
				<strong>Departure Wait:</strong> <span id="textWaitDeparture"></span><br/>
				<strong>Smuggling Penalty<i>/Bribe</i>:</strong> <span id="textSmugglingPenalty"></span><br/>
				<strong>Local Rarity:</strong> <span id="textRarityMod"></span><br/>
			</div>
			<div class="local-customs-box tooltip">
				<span class="tooltiptext">
				Last reported local restrictions on weapons and armor at this location. Consult your Game Master.
				</span>
				<h3 class="local-customs-box-header">Weapon Permits</h3>
				<strong>Concealed:</strong> <span id="textPermitWeaponConcealed"></span><br/>
				<strong>Small Arms:</strong> <span id="textPermitWeaponSmall"></span><br/>
				<strong>Rifles, Large Melee:</strong> <span id="textPermitWeaponRifle"></span><br/>
				<strong>Heavy Weapons:</strong> <span id="textPermitWeaponHeavy"></span><br/>
				<strong>Light Armor:</strong> <span id="textPermitArmorLight"></span><br/>
				<strong>Power Armor:</strong> <span id="textPermitArmorPower"></span><br/>
				<strong>Violations Penalty<i>/Bribe</i>:</strong> <span id="textWeaponPenalty"></span><br/>
			</div>
			<div class="local-customs-box tooltip">
				<span class="tooltiptext">
				Last reported local laws for this location. Consult your Game Master.
				</span>
				<h3 class="local-customs-box-header">Contraband</h3>
				<strong>Spice:</strong> <span id="textLawSpice"></span><br/>
				<strong>Trespassing:</strong> <span id="textLawTrespassing"></span><br/>
				<strong>Military Gear:</strong> <span id="textLawMilitary"></span><br/>
				<strong>Slicing:</strong> <span id="textLawSlicing"></span><br/>
				<strong>Criticism of the Empire:</strong> <span id="textLawCriticism"></span><br/>
				<strong>Slavery:</strong> <span id="textLawSlavery"></span><br/>
				<strong>Minor Theft:</strong> <span id="textLawTheft"></span><br/>
				<strong>Bribery:</strong> <span id="textLawBribery"></span>
			</div>
			<!-- Local Rumors -->
			<td class="local-events align-top">
				<h4 class="local-customs-box-header font-starwars">Local Rumors reported at <span id="localEventsLocation">your location</span></h4>
				<div class="tooltip">
					<span class="tooltiptext">
					See the Suggested Usage below. These are all SUGGESTIONS to enhance the story. Nothing is required.
					</span>
					<ul id="local-events" class="font-normal">
						<center>(select a Location at top left)</center>
					</ul><!-- populated dynamically -->
				</div>
				<div id="instructions-box" class="instructions-box font-starwars tooltip">
					<strong>Suggested Usage:</strong>
					<span class="tooltiptext">
					First step is to choose a Location (not Destination) from the dropdown at top left.<br/>
					This populates the details for that location and some random local events which can be optionally chosen.<br/>
					Next, choose a Destination at top right to show details for that location and estimated travel statistics.<br/>
					If you can't read the font, there are buttons underneath the main header. If they don't work, you may have disabled JavaScript.<br/>
					</span>
					<ul>
						<li><em>Select a Current Location</em> (top left) to retrieve local events and customs from BoSS, regional governors, HoloNet, etc.</li>
						<li>Each local event is a <i>possibility</i> - a <i>rumor</i> - to enhance the narrative. <b>Nothing is required.</b> Use what makes sense and prompts a better story.</li>
						<li>During their stay in the system, each PC may, at any time, choose to select <em>up to one local event</em> to <em>activate</em> or <em>negate</em> the event for the duration of their stay.</li>
						<li>A local event, once chosen, is unavailable for further actions.</li>
						<li><span class="local-event-free">Free Events</span> may be activated or negated for the duration of stay <i>at no cost</i>, limited to one per player.</li>
						<li><span class="local-event-destiny-required">Destiny Required Events</span> always require a Destiny Point to activate or negate.</li>
						<li><span class="local-event-destiny-optional">Destiny Optional Events</span> can apply for one transaction only at no cost, or a Destiny Point may be used to create a permanent NPC.</li>
						<li><span class="local-event-destiny-optional">Destiny Optional Event</span>-created permanent NPCs are named and managed by the PC who created them, voiced by the GM, and are always available at this location and able to perform the chosen service at no future cost by any PC.</li>
						<li>The GM may, at their discretion, not allow NPCs or events to be found in locations where it doesn't make sense.</li>
						<li>Upon system arrival, and after the party has chosen whether to select any events initially, the GM may activate or negate up to one <span class="local-event-destiny-required">Destiny Required Event</span> (spending a Destiny point if so), and as many <span class="local-event-free">Free Events</span> at no cost as needed for a good story.</li>
						<li><span class="highlight">Highlighted</span> data indicates to the GM and to the PCs that <span class="font-normal starwars-dice boost">b</span>oosts and <span class="font-normal starwars-dice setback">s</span>etbacks are possible consequences of this local event or location description.
						<!-- li>Wondering what a "hot plook" is? It's the latest food craze sweeping the galaxy. Sometimes people mispronounce it. Seems like every time you're waiting in line for another wet bag of <em><i>h</i></em>ot <em><i>pl</i></em>ook, some shady Game Master sidles up to you and offers you a job, or a mission, or a chance to save the galaxy. Whatever you choose, it will probably be a good story to tell at your funeral.</li -->
						<li>Expect Imperial presence to be higher near the Core, and weapons laws to be looser nearer or past the Outer Rim.</li>
						<li>Capital Ships (silhouette 5+) pay substantially higher Starport costs.</li>
						<li>Upon departure, all local events and NPCs not made permanent via Destiny Points are reset.</li>
						<li><em>Select a Destination</em> in the Astrogation Computer to display details and estimated travel statistics to that system. Hyperdrive class impacts this heavily, as does the number and quality of Hyperlanes available at this location.</li>
					</ul>
					<div>
						<span class="align-right" style="display: contents; font-size: smaller;>
							<label for="galacticHyperspaceConstant">Galactic Hyperspace Constant&nbsp;
							<select id="galacticHyperspaceConstant" style="width: fit-content; font-size: smaller;">
								<option value="0.01">0.01</option>
								<option value="0.1">0.1</option>
								<option value="0.25">0.25</option>
								<option value="0.5">0.5</option>
								<option value="1" selected="true">1.0</option>
								<option value="2.5">2.5</option>
								<option value="5">5.0</option>
								<option value="10">10.0</option>
							</select>
						</span>
					</div>
				</div>
			</td>
		</tr>
	</table>
	<div display="inline">
		<span class="payme-link"><a href="https://buymeacoffee.com/1gquRzpXr" target="_blank">if you find this helpful</a></span>
		<span id="helpButton" style="float: right;" onclick="toggleHelp()">help</span>
	</div>
</body>

</html>
